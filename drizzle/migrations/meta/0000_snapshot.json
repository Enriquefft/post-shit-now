{
  "id": "a00da3dc-fe79-45bb-a277-9df695fe08c4",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.api_keys": {
      "name": "api_keys",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "service": {
          "name": "service",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "key_name": {
          "name": "key_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "encrypted_value": {
          "name": "encrypted_value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "api_keys_isolation": {
          "name": "api_keys_isolation",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "hub_user"
          ],
          "using": "\"api_keys\".\"user_id\" = current_setting('app.current_user_id')",
          "withCheck": "\"api_keys\".\"user_id\" = current_setting('app.current_user_id')"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.edit_history": {
      "name": "edit_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "post_id": {
          "name": "post_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "original_content": {
          "name": "original_content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "edited_content": {
          "name": "edited_content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "edit_distance": {
          "name": "edit_distance",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "edit_ratio": {
          "name": "edit_ratio",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "edit_patterns": {
          "name": "edit_patterns",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "edit_history_isolation": {
          "name": "edit_history_isolation",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "hub_user"
          ],
          "using": "\"edit_history\".\"user_id\" = current_setting('app.current_user_id')",
          "withCheck": "\"edit_history\".\"user_id\" = current_setting('app.current_user_id')"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.oauth_tokens": {
      "name": "oauth_tokens",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "access_token": {
          "name": "access_token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "refresh_token": {
          "name": "refresh_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "scopes": {
          "name": "scopes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "oauth_tokens_isolation": {
          "name": "oauth_tokens_isolation",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "hub_user"
          ],
          "using": "\"oauth_tokens\".\"user_id\" = current_setting('app.current_user_id')",
          "withCheck": "\"oauth_tokens\".\"user_id\" = current_setting('app.current_user_id')"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.post_metrics": {
      "name": "post_metrics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "post_id": {
          "name": "post_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "external_post_id": {
          "name": "external_post_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "impression_count": {
          "name": "impression_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "like_count": {
          "name": "like_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "retweet_count": {
          "name": "retweet_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "quote_count": {
          "name": "quote_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "reply_count": {
          "name": "reply_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "bookmark_count": {
          "name": "bookmark_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "url_link_clicks": {
          "name": "url_link_clicks",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "user_profile_clicks": {
          "name": "user_profile_clicks",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "engagement_score": {
          "name": "engagement_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "engagement_rate_bps": {
          "name": "engagement_rate_bps",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "post_format": {
          "name": "post_format",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "post_topic": {
          "name": "post_topic",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "post_pillar": {
          "name": "post_pillar",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "collected_at": {
          "name": "collected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "post_metrics_isolation": {
          "name": "post_metrics_isolation",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "hub_user"
          ],
          "using": "\"post_metrics\".\"user_id\" = current_setting('app.current_user_id')",
          "withCheck": "\"post_metrics\".\"user_id\" = current_setting('app.current_user_id')"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.posts": {
      "name": "posts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "media_urls": {
          "name": "media_urls",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "sub_status": {
          "name": "sub_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "parent_post_id": {
          "name": "parent_post_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "thread_position": {
          "name": "thread_position",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "trigger_run_id": {
          "name": "trigger_run_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "fail_reason": {
          "name": "fail_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform_post_ids": {
          "name": "platform_post_ids",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "scheduled_at": {
          "name": "scheduled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "published_at": {
          "name": "published_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "external_post_id": {
          "name": "external_post_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "posts_isolation": {
          "name": "posts_isolation",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "hub_user"
          ],
          "using": "\"posts\".\"user_id\" = current_setting('app.current_user_id')",
          "withCheck": "\"posts\".\"user_id\" = current_setting('app.current_user_id')"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.preference_model": {
      "name": "preference_model",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "top_formats": {
          "name": "top_formats",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "top_pillars": {
          "name": "top_pillars",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "best_posting_times": {
          "name": "best_posting_times",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "hook_patterns": {
          "name": "hook_patterns",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "common_edit_patterns": {
          "name": "common_edit_patterns",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "avg_edit_ratio": {
          "name": "avg_edit_ratio",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "fatigued_topics": {
          "name": "fatigued_topics",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "locked_settings": {
          "name": "locked_settings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "follower_history": {
          "name": "follower_history",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "preference_model_user_id_unique": {
          "name": "preference_model_user_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "user_id"
          ]
        }
      },
      "policies": {
        "preference_model_isolation": {
          "name": "preference_model_isolation",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "hub_user"
          ],
          "using": "\"preference_model\".\"user_id\" = current_setting('app.current_user_id')",
          "withCheck": "\"preference_model\".\"user_id\" = current_setting('app.current_user_id')"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.strategy_adjustments": {
      "name": "strategy_adjustments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "adjustment_type": {
          "name": "adjustment_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "field": {
          "name": "field",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "old_value": {
          "name": "old_value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "new_value": {
          "name": "new_value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "evidence": {
          "name": "evidence",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "tier": {
          "name": "tier",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "applied_at": {
          "name": "applied_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {
        "strategy_adjustments_isolation": {
          "name": "strategy_adjustments_isolation",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "hub_user"
          ],
          "using": "\"strategy_adjustments\".\"user_id\" = current_setting('app.current_user_id')",
          "withCheck": "\"strategy_adjustments\".\"user_id\" = current_setting('app.current_user_id')"
        }
      },
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_external_id_unique": {
          "name": "users_external_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "external_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}